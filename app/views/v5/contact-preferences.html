{% extends 'layout.html' %}

{% block pageTitle %}
How would you prefer to be contacted?
{% endblock %}

{% block content %}
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

        {{ backLink({
            "href": "javascript:history.go(-1)",
            "text": "Go back"
        }) }}

        <form action="/v4/are-you-pregnant" method="post">

            <div class="nhsuk-form-group">

            <fieldset class="nhsuk-fieldset" aria-describedby="contact-hint">
                <h1 class="nhsuk-label-wrapper">
                    <label class="nhsuk-label nhsuk-label--xl nhsuk-u-margin-bottom-3" for="contactpreferences">
                        How would you prefer to be contacted?
                    </label>
                </h1>

                <span class="nhsuk-hint" id="example-with-hint-text-hint">
                    Select all options that are relevant to you.
                </span>

                <div class="nhsuk-checkboxes nhsuk-checkboxes--conditional" id="contactpreferences">

                    <div class="nhsuk-checkboxes__item">
                        <input class="nhsuk-checkboxes__input" id="contact-1" name="contact" type="checkbox" value="email" aria-controls="conditional-contact-1" aria-expanded="false">
                        <label class="nhsuk-label nhsuk-checkboxes__label" for="contact-1">
                        Email
                        </label>
                    </div>

                    <div class="nhsuk-checkboxes__conditional nhsuk-checkboxes__conditional--hidden" id="conditional-contact-1">

                        <div class="nhsuk-form-group">
                        <label class="nhsuk-label" for="emailaddress">
                            Email address
                        </label>
                        <input class="nhsuk-input nhsuk-u-width-two-thirds" id="emailaddress" name="emailaddress" type="text">
                        </div>

                    </div>

                    <div class="nhsuk-checkboxes__item">
                        <input class="nhsuk-checkboxes__input" id="contact-2" name="contact" type="checkbox" value="text" aria-controls="conditional-contact-2" aria-expanded="false">
                        <label class="nhsuk-label nhsuk-checkboxes__label" for="contact-2">
                        Text message
                        </label>
                    </div>

                    <div class="nhsuk-checkboxes__conditional nhsuk-checkboxes__conditional--hidden" id="conditional-contact-2">

                        <div class="nhsuk-form-group">
                        <label class="nhsuk-label" for="mobile">
                            Mobile phone number
                        </label>
                        <input class="nhsuk-input nhsuk-u-width-two-thirds" id="mobile" name="mobile" type="number" pattern="[0-9]*">
                        </div>

                    </div>

                    <div class="nhsuk-radios__divider">or</div>

                    <div class="nhsuk-checkboxes__item">
                        <input class="nhsuk-checkboxes__input" id="NONE" name="contact" type="checkbox" value="NONE">
                        <label class="nhsuk-label nhsuk-checkboxes__label" for="NONE">
                            I prefer not to be contacted
                        </label>
                    </div>

                </div>
            </fieldset>

            </div>
            
            <button class="nhsuk-button" type="submit">
                Continue
            </button>

        </form>

        <script>
        var $others = $('input[name="contact"]').not('#NONE')
        $('#NONE').change(function () {
          if (this.checked) {
            $others.prop('checked', false);

            $('#conditional-contact-1').addClass('nhsuk-checkboxes__conditional--hidden');
            $('#contact-1').attr("aria-expanded","false");
            $('#emailaddress').val('');            
            $('#conditional-contact-2').addClass('nhsuk-checkboxes__conditional--hidden');
            $('#contact-2').attr("aria-expanded","false");
            $('#mobile').val('');

          }
        });
        $others.change(function () {
          if (this.checked) {
            $('#NONE').prop('checked', false);
          }
        })
        </script>

    </div>
</div>

{% endblock %}