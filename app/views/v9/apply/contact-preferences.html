{% extends 'layout.html' %}

{% block pageTitle %}
How would you prefer to be contacted?
{% endblock %}

{% block content %}
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

<div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds">

        {{ backLink({
            "href": "javascript:history.go(-1)",
            "text": "Go back"
        }) }}

        <form action="/v9/contact-preferences" method="post">

            <div class="nhsuk-form-group">

            <fieldset class="nhsuk-fieldset" aria-describedby="contact-hint">
                <h1 class="nhsuk-label-wrapper">
                    <label class="nhsuk-label nhsuk-label--xl nhsuk-u-margin-bottom-3" for="contactpreferences">
                        How would you prefer to be contacted?
                    </label>
                </h1>

                <span class="nhsuk-hint" id="example-with-hint-text-hint">
                    Select one option.
                </span>

                <div class="nhsuk-radios nhsuk-radios--conditional" id="contactpreferences">

                    <div class="nhsuk-radios__item">
                        <input class="nhsuk-radios__input" id="contact-1" name="contact" type="radio" value="email" aria-controls="conditional-contact-1" aria-expanded="false">
                        <label class="nhsuk-label nhsuk-radios__label" for="contact-1">
                        Email
                        </label>
                    </div>

                    <div class="nhsuk-radios__conditional nhsuk-radios__conditional--hidden" id="conditional-contact-1">

                        <div class="nhsuk-form-group">
                        <label class="nhsuk-label" for="emailaddress">
                            Email address
                        </label>
                        <input class="nhsuk-input nhsuk-u-width-two-thirds" id="emailaddress" name="emailaddress" type="text">
                        </div>

                    </div>

                    <div class="nhsuk-radios__item">
                        <input class="nhsuk-radios__input" id="contact-2" name="contact" type="radio" value="text" aria-controls="conditional-contact-2" aria-expanded="false">
                        <label class="nhsuk-label nhsuk-radios__label" for="contact-2">
                        Text message
                        </label>
                    </div>

                    <div class="nhsuk-radios__conditional nhsuk-radios__conditional--hidden" id="conditional-contact-2">

                        <div class="nhsuk-form-group">
                        <label class="nhsuk-label" for="mobile">
                            Mobile phone number
                        </label>
                        <input class="nhsuk-input nhsuk-u-width-two-thirds" id="mobile" name="mobile" type="number" pattern="[0-9]*">
                        </div>

                    </div>

                    <!-- <div class="nhsuk-radios__divider">or</div> -->

                    <div class="nhsuk-radios__item">
                        <input class="nhsuk-radios__input" id="NONE" name="contact" type="radio" value="NONE">
                        <label class="nhsuk-label nhsuk-radios__label" for="NONE">
                            Letter
                        </label>
                    </div>

                </div>
            </fieldset>

            </div>

            <details class="nhsuk-details">
              <summary class="nhsuk-details__summary">
                <span class="nhsuk-details__summary-text">
                  Why we ask for your email address or mobile phone number
                </span>
              </summary>
              <div class="nhsuk-details__text">
                <p>We use your email address or mobile phone number to send quick updates about your application.</p>
                <p>Selecting post will take longer.</p>
              </div>
            </details>
            
            <button class="nhsuk-button" type="submit">
                Continue
            </button>

        </form>

        
        <script>
            
        $('input[type=radio][name="contact"]').change(function() {
            
            if (this.value == 'email') {
                $('#conditional-contact-2').addClass('nhsuk-radios__conditional--hidden');
                $('#contact-2').attr("aria-expanded","false");
                $('#mobile').val('');
            }
            else if (this.value == 'text') {
                $('#conditional-contact-1').addClass('nhsuk-radios__conditional--hidden');
                $('#contact-1').attr("aria-expanded","false");
                $('#emailaddress').val('');
            }
            else {
                $('#conditional-contact-1').addClass('nhsuk-radios__conditional--hidden');
                $('#contact-1').attr("aria-expanded","false");
                $('#emailaddress').val('');
                $('#conditional-contact-2').addClass('nhsuk-radios__conditional--hidden');
                $('#contact-2').attr("aria-expanded","false");
                $('#mobile').val('');
            }
            
        });

        </script>
        

    </div>
</div>

{% endblock %}